@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== CSS Variables for theming (shadcn) ===== */

:root,
[data-theme="light"] {
  --background: 220 52% 96%;
  --foreground: 209 42% 12%;
  --card: 218 50% 89%;
  --card-foreground: 209 42% 12%;
  --popover: 216 42% 84%;
  --popover-foreground: 209 42% 12%;
  --primary: 205 37% 50%;
  --primary-foreground: 212 35% 8%;
  --secondary: 218 50% 89%;
  --secondary-foreground: 209 42% 12%;
  --muted: 218 50% 89%;
  --muted-foreground: 210 30% 36%;
  --accent: 213 65% 58%;
  --accent-foreground: 209 42% 12%;
  --accent-1: 41 75% 84%;
  --accent-2: 120 43% 87%;
  --accent-3: 38 80% 57%;
  --accent-4: 213 65% 58%;
  --accent-5: 15 57% 58%;
  --accent-6: 321 28% 51%;
  --destructive: 0 70% 55%;
  --destructive-foreground: 0 0% 100%;
  --border: 215 32% 76%;
  --input: 216 36% 86%;
  --ring: 205 35% 57%;
  --radius: 0.5rem;
  --info: 200 70% 50%;
  --success: 150 60% 45%;
  --warning: 40 80% 55%;
  --error: 0 70% 55%;

  /* Dedicated text tiers */
  --text-high: 209 42% 12%;
  --text-mid: 208 32% 26%;
  --text-subtle: 210 24% 42%;
  --text-on-overlay: 0 0% 100%;

  /* Border and separator tiers */
  --border-subtle: 216 30% 87%;
  --border-default: 215 32% 76%;
  --border-strong: 212 34% 65%;

  /* Interaction helpers */
  --interactive-disabled: 214 38% 74%;

  /* Depth/Surface system - slate blue progression */
  --surface-0: 220 52% 96%;
  --surface-1: 222 58% 93%;
  --surface-2: 218 50% 89%;
  --surface-3: 216 46% 80%;
  --surface-4: 212 34% 73%;

  /* Dropdown/popover specific */
  --dropdown: 220 52% 96%;

  /* New Tableau 10 categorical colors (light mode: deeper warm tones for contrast) */
  --chart-1: 211 36% 48%;
  --chart-2: 25 75% 38%;
  --chart-3: 359 65% 48%;
  --chart-4: 175 40% 40%;
  --chart-5: 113 40% 36%;
  --chart-6: 42 70% 38%;
  --chart-7: 317 30% 46%;
  --chart-8: 354 60% 52%;
  --chart-9: 22 30% 40%;
  --chart-10: 17 12% 52%;

  /* Logo ramp */
  --brand-logo-deep: 204 36% 40%;
  --brand-logo-mid: 205 37% 50%;
  --brand-logo-light: 206 36% 66%;

  /* Neobrutalism variables */
  --main: 218 50% 89%;
  --main-foreground: 209 42% 12%;
  --secondary-background: 218 50% 89%;
  --overlay: 0 0% 0% / 0.5;
  --radius-base: 0.5rem;
  --shadow: 4px 4px 0px 0px hsl(0 0% 0%);
  --box-shadow-x: 4px;
  --box-shadow-y: 4px;
  --reverse-box-shadow-x: -4px;
  --reverse-box-shadow-y: -4px;
  
  color-scheme: light;
}

/* Global border normalization: pure black and thinner */
[class*="border"] {
  border-color: #000 !important;
}

[class*="border-2"],
[class*="border-t-2"],
[class*="border-r-2"],
[class*="border-b-2"],
[class*="border-l-2"],
[class*="border-x-2"],
[class*="border-y-2"] {
  border-width: 1px !important;
}

.depth1-thick-border {
  border-width: 2px !important;
}

/* Field depth mapping: inputs/selects/textareas sit one surface above container */
:where(.bg-surface-0, .bg-background) :is([data-slot="input"], [data-slot="textarea"], [data-slot="select-trigger"]) {
  background-color: hsl(var(--surface-1));
}

:where(.bg-surface-1) :is([data-slot="input"], [data-slot="textarea"], [data-slot="select-trigger"]) {
  background-color: hsl(var(--surface-2));
}

:where(.bg-surface-2, .bg-card, .bg-secondary-background) :is([data-slot="input"], [data-slot="textarea"], [data-slot="select-trigger"]) {
  background-color: hsl(var(--surface-3));
}

:where(.bg-surface-3, .bg-popover) :is([data-slot="input"], [data-slot="textarea"], [data-slot="select-trigger"]) {
  background-color: hsl(var(--surface-4));
}

:where(.bg-surface-4) :is([data-slot="input"], [data-slot="textarea"], [data-slot="select-trigger"]) {
  background-color: hsl(var(--surface-4));
}

[data-theme="dark"] {
  --background: 222 34% 14%;
  --foreground: 210 40% 94%;
  --card: 217 46% 29%;
  --card-foreground: 210 40% 94%;
  --popover: 213 52% 38%;
  --popover-foreground: 210 40% 94%;
  --primary: 205 37% 50%;
  --primary-foreground: 212 35% 8%;
  --secondary: 217 46% 29%;
  --secondary-foreground: 210 40% 94%;
  --muted: 217 46% 29%;
  --muted-foreground: 210 22% 74%;
  --accent: 213 65% 58%;
  --accent-foreground: 209 42% 12%;
  --accent-1: 41 75% 84%;
  --accent-2: 120 43% 87%;
  --accent-3: 38 80% 57%;
  --accent-4: 213 65% 58%;
  --accent-5: 15 57% 58%;
  --accent-6: 321 28% 51%;
  --destructive: 0 70% 50%;
  --destructive-foreground: 0 0% 100%;
  --border: 213 35% 44%;
  --input: 218 38% 32%;
  --ring: 208 58% 48%;
  --info: 200 80% 55%;
  --success: 160 70% 40%;
  --warning: 35 90% 50%;
  --error: 0 70% 50%;

  /* Dedicated text tiers */
  --text-high: 210 40% 94%;
  --text-mid: 210 28% 83%;
  --text-subtle: 210 20% 70%;
  --text-on-overlay: 0 0% 100%;

  /* Border and separator tiers */
  --border-subtle: 219 34% 28%;
  --border-default: 213 35% 44%;
  --border-strong: 208 48% 56%;

  /* Interaction helpers */
  --interactive-disabled: 214 26% 46%;

  /* Depth/Surface system - slate blue progression */
  --surface-0: 222 34% 14%;
  --surface-1: 220 40% 21%;
  --surface-2: 217 46% 29%;
  --surface-3: 213 52% 38%;
  --surface-4: 208 54% 52%;

  /* Dropdown/popover specific */
  --dropdown: 222 34% 14%;

  /* New Tableau 10 categorical colors (dark shares categorical hues) */
  --chart-1: 211 36% 48%;
  --chart-2: 30 88% 56%;
  --chart-3: 359 70% 61%;
  --chart-4: 175 31% 59%;
  --chart-5: 113 34% 47%;
  --chart-6: 47 82% 61%;
  --chart-7: 317 25% 58%;
  --chart-8: 354 100% 81%;
  --chart-9: 22 24% 49%;
  --chart-10: 17 9% 70%;

  /* Logo ramp */
  --brand-logo-deep: 204 36% 40%;
  --brand-logo-mid: 205 37% 50%;
  --brand-logo-light: 206 36% 66%;

  /* Neobrutalism variables */
  --main: 217 46% 29%;
  --main-foreground: 210 40% 94%;
  --secondary-background: 217 46% 29%;
  --overlay: 0 0% 0% / 0.7;
  --radius-base: 0.5rem;
  --shadow: 4px 4px 0px 0px hsl(0 0% 0%);
  --box-shadow-x: 4px;
  --box-shadow-y: 4px;
  --reverse-box-shadow-x: -4px;
  --reverse-box-shadow-y: -4px;
  
  color-scheme: dark;
}

/* ===== Font Mode Variables ===== */
/* Switch display font based on user preference */

:root,
[data-font="pt-serif"] {
  --font-display: var(--font-pt-serif);
}

[data-font="rethink"] {
  --font-display: var(--font-rethink);
}

/* ===== Style Mode Variables ===== */
/* These override the base neobrutalism variables based on style preference */

/* Neo mode (default) - bold brutalist styling */
[data-style="neo"],
:root {
  --border-width: 2px;
  --card-shadow: 4px 4px 0px 0px hsl(0 0% 0%);
  --card-border-color: 0 0% 0%;
  --button-translate-x: 4px;
  --button-translate-y: 4px;
  --hover-transform: translate(var(--button-translate-x), var(--button-translate-y));
}

/* Clean mode - softer, modern shadcn styling */
[data-style="clean"] {
  --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --box-shadow-x: 0px;
  --box-shadow-y: 0px;
  --reverse-box-shadow-x: 0px;
  --reverse-box-shadow-y: 0px;
  --border-width: 1px;
  --card-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --card-border-color: var(--border);
  --button-translate-x: 0px;
  --button-translate-y: 0px;
}

/* Dark mode overrides for clean style */
[data-theme="dark"][data-style="clean"] {
  --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
  --card-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.2), 0 2px 4px -2px rgb(0 0 0 / 0.2);
}

/* ===== Base layer ===== */
@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground antialiased font-sans;
  }

  h1 {
    @apply font-display text-4xl sm:text-5xl font-bold tracking-tight;
  }

  h2 {
    @apply font-display text-2xl sm:text-3xl font-bold tracking-tight;
  }

  h3 {
    @apply font-display text-xl sm:text-2xl font-bold;
  }

  h4 {
    @apply font-display text-lg sm:text-xl font-bold;
  }
}

/* ===== Page layout utilities ===== */
.text-page-structure {
  @apply mx-auto max-w-screen-xl px-4 py-16 lg:flex flex flex-1 flex-col items-center w-11/12 pt-2;
}

.text-page-structure > h1 {
  @apply text-primary text-4xl/[3rem] sm:text-5xl/[4rem] text-center;
}

.subtitle-structure {
  @apply w-full md:w-5/6 space-y-24 pb-8;
}

.subtitle-structure p {
  @apply text-center mx-auto mt-4 text-xl/relaxed;
}

.general-classes {
  @apply text-left pt-4 pb-32 md:py-16;
}

.name-classes {
  @apply font-display font-bold text-3xl/[3rem];
}

.title-classes {
  @apply font-display font-bold text-2xl sm:text-3xl text-foreground;
}

.description-classes {
  @apply mt-4 pb-4 text-xl/relaxed;
}

.hero-content {
  @apply flex flex-col lg:flex-row items-center gap-8 p-4;
}

/* Selection */
::selection {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
}

/* Neo Brutalist Button Shimmer Animation */
@keyframes neo-shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(300%);
  }
}

.neo-shimmer {
  transform: translateX(-100%);
}

.neo-brutalist-btn:hover .neo-shimmer {
  animation: neo-shimmer 0.4s ease-out forwards;
}

@keyframes accent-rule-slide {
  0% {
    opacity: 0;
    transform: translateX(-10px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Small decorative accent lines for card hierarchy */
.accent-rule {
  height: 2px;
  width: 3.25rem;
  border-radius: 9999px;
  opacity: 0.95;
}

.accent-rule-amber {
  background: hsl(var(--chart-2));
}

.accent-rule-teal {
  background: hsl(var(--chart-4));
}

.accent-rule-green {
  background: hsl(var(--chart-5));
}

.accent-rule-purple {
  background: hsl(var(--chart-7));
}

.accent-rule-animate {
  animation: accent-rule-slide 420ms ease-out both;
}

@media (prefers-reduced-motion: reduce) {
  .accent-rule-animate {
    animation: none;
  }
}

/* ===== Legacy compatibility (migrate to shadcn components) ===== */
@layer components {
  /* Matches shadcn Input */
  .input {
    @apply flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm;
    @apply placeholder:text-muted-foreground;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring;
    @apply disabled:cursor-not-allowed disabled:opacity-50;
  }

  .input-bordered {
    @apply border-border;
  }

  /* Matches shadcn Button */
  .btn {
    @apply inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring;
    @apply disabled:pointer-events-none disabled:opacity-50;
    @apply h-10 px-4 py-2 bg-secondary text-secondary-foreground hover:bg-secondary/80;
  }

  .btn-primary {
    @apply bg-primary text-primary-foreground hover:bg-primary/90;
  }

  .btn-secondary {
    @apply bg-secondary text-secondary-foreground hover:bg-secondary/80;
  }

  .btn-accent {
    @apply bg-accentScale-3 text-accent-foreground hover:bg-accentScale-4;
  }

  .btn-error {
    @apply bg-destructive text-destructive-foreground hover:bg-destructive/90;
  }

  .btn-success {
    @apply bg-success text-white hover:bg-success/90;
  }

  .btn-outline {
    @apply border border-input bg-background hover:bg-accent hover:text-accent-foreground;
  }

  .btn-ghost {
    @apply bg-transparent hover:bg-accent hover:text-accent-foreground;
  }

  .btn-sm {
    @apply h-8 px-3 text-xs;
  }

  .btn-lg {
    @apply h-11 px-8;
  }

  .btn-circle {
    @apply rounded-full p-0 h-8 w-8;
  }

  /* Matches shadcn Dialog styling */
  .modal-box {
    @apply bg-card text-card-foreground rounded-lg shadow-lg p-6 max-w-md w-full mx-4;
  }
}
